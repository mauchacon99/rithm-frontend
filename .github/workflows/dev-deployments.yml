name: Dev Deployments

on:
  # push:
  #   branches:
  #     - "dev"

  # TODO: remove
  pull_request:
    paths-ignore: [.vscode/**, .github/**]
    branches: [ dev ]

jobs:

  # Deploys the Instanbul test coverage site
  test-coverage:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - run: npm ci
    - run: npm run test-ci

    # Coverage badges will be updated on any branch except protected
    # branches 'develop' and 'master' and on a pull requests
    - name: Test angular action
      uses:  demyanets/angular-coverage-badges-action@v1
      with:
        coverage-summary-path: coverage/stslib/coverage-summary.json
        protected-branches: '["master",  "develop"]'

    # - name: Installing dependencies
    #   run: npm --v && npm ci

    # - name: Linting Angular app
    #   run: npm run lint

  # Deploys the Compodoc documentation site
  # compodoc:
  #   runs-on: ubuntu-latest

  #   steps:
  #   - uses: actions/checkout@v2

  #   - name: Installing dependencies
  #     run: npm ci

  #   - name: Linting all stylesheets
  #     run: npm run lint-style

  # Deploys the SassDoc documentation site
  # sassdoc:
  #   runs-on: ubuntu-latest

  #   steps:
  #   - uses: actions/checkout@v2

  #   - name: Installing dependencies
  #     run: npm ci

  #   - name: Building Angular web project
  #     run: npm run build
