<!--Loading the widget-->
<app-loading-widget
  *ngIf="isLoading"
  id="app-loading-indicator"
></app-loading-widget>

<!--Show error in the widget-->
<app-error-widget
  *ngIf="failedLoadWidget"
  id="error-load-widget"
  [errorMessage]="'Unable to retrieve document data'"
  (tryAgain)="getDocumentWidget()"
>
</app-error-widget>
<!-- Header widget -->
<div class="w-full p-2 flex flex-col h-full">
  <!--  Header Container -->
  <div class="m-2">
    <div class="flex justify-between">
      <h3 *ngIf="dataDocumentWidget" class="font-semibold truncate">
        {{ dataDocumentWidget.documentName }}
      </h3>
    </div>
  </div>
  <!--List of the questions-->
  <div
    class="w-full p-2 flex h-full overflow-auto scrollbar"
    *ngIf="!failedLoadWidget && !isLoading"
  >
    <div class="h-full w-full" *ngIf="dataDocumentWidget">
      <ng-container
        class="h-full w-full"
        *ngFor="let questionList of dataDocumentWidget.questions"
      >
        <ng-container
          class="h-full w-full"
          *ngFor="let questions of questionList.questions"
        >
          <div class="py-3 border-b border-b-secondary-200">
            <p class="font-semibold text-sm">
              {{
                questions.questionType === 'instructions'
                  ? 'Instruction'
                  : questions.prompt
              }}
            </p>

            <div [ngSwitch]="questions.questionType">
              <p *ngSwitchCase="'checklist'" class="pt-3 text-sm">
                <span *ngFor="let answer of questions.answer?.asArray">
                  {{ answer.value }} -
                  {{ answer.isChecked ? 'Selected' : 'No selected' }}<br />
                </span>
              </p>
              <p *ngSwitchCase="'multiDropdown'" class="pt-3 text-sm">
                <span *ngFor="let answer of questions.answer?.asArray">
                  {{ answer.value }} -
                  {{ answer.isChecked ? 'Selected' : 'No selected' }}<br />
                </span>
              </p>
              <p *ngSwitchCase="'singleDropdown'" class="pt-3 text-sm">
                <span *ngFor="let answer of questions.answer?.asArray">
                  {{ answer.value }} -
                  {{ answer.isChecked ? 'Selected' : 'No selected' }}<br />
                </span>
              </p>
              <p *ngSwitchCase="'instructions'" class="pt-3 text-sm">
                {{ questions.prompt }}
              </p>
              <p *ngSwitchDefault class="pt-3 text-sm">
                {{
                  questions.answer?.value ||
                    "This question doesn't have an answer."
                }}
              </p>
            </div>
          </div>
        </ng-container>
      </ng-container>
      <div
        class="text-center py-2 text-sm"
        *ngIf="!dataDocumentWidget.questions.length"
      >
        This document doesn't have any questions.
      </div>
    </div>
  </div>
</div>
