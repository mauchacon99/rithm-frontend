<div *ngIf="isLoading" id="loading-docs" class="h-full flex justify-center items-center flex-col">
  <p class="py-2 truncate">Loading</p>
  <app-loading-indicator></app-loading-indicator>
</div>

<div *ngIf="failedLoadWidget" class="h-full" id="card-error">
  <div class="w-full h-full flex items-center justify-center">
    <div class="w-full text-center">
      <i class="fas fa-exclamation-triangle text-error-500 text-3xl"></i>
      <h3 class="text-error-500 truncate">ERROR</h3>
      <p class="text-sm truncate mb-5">Unable to retrieve station data</p>
      <button mat-stroked-button color="warn" (click)="getStationWidgetDocuments()"
              (touchstart)="getStationWidgetDocuments()" id="try-again" data-testid="try-again">
        Try Again
      </button>
    </div>
  </div>
</div>

<!-- station widget -->
<div *ngIf="!isLoading && !failedLoadWidget" id="show-docs" class="m-2 h-full w-full">
  <!-- Header widget -->
  <div class="w-full p-2 flex flex-col h-full">
    <!--    Header Container-->
    <div class="m-2">
      <div class="flex justify-between">
        <h3 *ngIf="dataStationWidget" class="font-semibold truncate">
          {{ dataStationWidget.stationName }}
        </h3>
        <div *ngIf="dataStationWidget">
          <button *ngIf="dataStationWidget.documentGeneratorStatus === 'Manual'" mat-stroked-button color="accent"
                  data-testid="create-new-document" id="create-new-document">
            New Document <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
    </div>
    <!--    Column Headers-->
    <div class="grid grid-cols-12 text-xs text-secondary-500 p-2">
      <p class="col-span-5 overline-font truncate">Document</p>
      <p class="col-span-2 overline-font truncate">Assigned</p>
      <p class="col-span-2 overline-font truncate text-center">Priority</p>
      <p class="col-span-3 sm:col-span-2 overline-font truncate">
        Time in Station
      </p>
    </div>
    <!--    Row Container-->
    <div class="flex-grow overflow-auto">
      <div *ngIf="dataStationWidget" class="grid grid-cols-12 text-secondary-500 items-center">
        <ng-container *ngFor="let document of dataStationWidget.documents">
          <div class="col-span-5 py-4 border-solid border-b border-b-primary-100 text-xs truncate">
            {{ document.name }}
          </div>
          <div *ngIf="document.assignedUser" class="col-span-2 h-[49px] border-solid border-b border-b-primary-100">
            <div class="flex justify-center mt-2">
              <app-user-avatar [firstName]="document.assignedUser.firstName"
                               [lastName]="document.assignedUser.lastName">
              </app-user-avatar>
            </div>
          </div>
          <div *ngIf="!document.assignedUser"
               class="col-span-2 py-4 border-solid border-b border-b-primary-100 text-xs truncate">
            None
          </div>
          <div class="col-span-2 py-4 border-solid border-b border-b-primary-100 text-xs justify-center">
            <div class="flex justify-center">
              <i class="fas fa-exclamation-triangle"></i>
              <!--      {{ document.priority }}-->
            </div>
          </div>
          <div class="col-span-2 py-4 border-solid border-b border-b-primary-100 text-xs truncate">
            {{ getElapsedTime(document.flowedTimeUTC) }}
          </div>
          <div class="col-span-1 border-solid border-b border-b-primary-100 pb-2">
            <button mat-icon-button data-testid="show-document-widget" id="show-document-widget">
              <i class="fas fa-angle-double-right"></i>
            </button>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
